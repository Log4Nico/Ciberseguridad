# Library

Estás son las máquinas que me gustan a mí:

![alt text](img/image.png)

# Análisis

Empecemos con lo más obvio, un análisis de los puertos abiertos:

![alt text](img/image-1.png)

Encontramos abiertos los puertos 22(OpenSSH 7.2p2 Ubuntu 4ubuntu2.8) y el 80(Apache httpd 2.4.18).

Dejemos de lado el puerto 22 de momentos y centremonos en la página web:

![alt text](img/image-2.png)

![alt text](img/image-3.png)
> 3 posibles usuarios.

Hacemos un fuzzeo de la página:
> El menú de arriba no sirve.

![alt text](img/image-4.png)
> No está encontrando nada...

En el /robots.txt, encontramos esto:

![alt text](img/image-5.png)
> Puede que tengamos que hacer fuerza bruta.

![alt text](img/image-6.png)
> Otro posible usuario.

Como no podemos mirar más cosas, optaré por la opción de la fuerza bruta. Podemos hacerlo de 2 formas:

1. Usando hydra:

![alt text](img/image-7.png)

2. Usando medusa:
> Es demasiado lento como para enseñarlo.

Hay más formas de hacerlo pero estas son las herramientas que conozco. No voy a perder el tiempo intentando sacar la contraseña del SSH de usuarios que no estarán ni habilatados para este servicio.

Vale, ahora que tenemos un usuario y una contraseña, vamos a logearnos:

![alt text](img/image-8.png)

![alt text](img/image-9.png)
> Primera flag encontrada.

Hora de escalar privilegios.

![alt text](img/image-10.png)

El usuarios puede ejecutar como root el archivo .py de su directorio:

![alt text](img/image-11.png)

Por lo que entiendo, el script crea una copia de seguridad del directorio ``/var/www/html``.

Podríamos intentar cambiar el conenido del archivo para ejecutar lo que nosotros queramos, pero antes, debemos borrar el archivo y crearnos uno nuevo, ya que no podemos editarlo:

![alt text](img/image-12.png)

Y creamos un archivo con el mismo nombre y con el siguiente contenido:

![alt text](img/image-13.png)

Y ejecutamos el script:

![alt text](img/image-14.png)
> No se porque solo funciona con el último comando.

![alt text](img/image-15.png)
> Conseguimos la última flag.