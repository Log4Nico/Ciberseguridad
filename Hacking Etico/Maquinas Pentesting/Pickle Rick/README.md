# Pickle Rick

La interfaz está un poco rara porque lo hice directamente en windows.

# Análisis

Empezamos el análisis escaneando los puertos de la máquina:

![alt text](image.png)

Tenemos 2 puertos abiertos, el 22 con ssh y el 80 con apache. Si nos metemos en la página web:

![alt text](image-1.png)
![alt text](image-2.png)
> Veremos que no es muy segura.

Mientras el fuzzeo se hace, probamos los típicos directorios:

![alt text](image-3.png)
> Wubbalubbadubdub

![alt text](image-4.png)

/portal.php y /login.php, parecen ser el mismo directorio:

![alt text](image-5.png)

Tenemos un usuario, y algo que podemos usar como contraseña:

![alt text](image-6.png)
> Funcionaron.

Parece ser una consola que ejecuta comandos en el servidor:

![alt text](image-7.png)

Hagamos una busqueda sencilla de lago útil:

![alt text](image-8.png)
![alt text](image-9.png)
> cat no funciona en esta terminal.
> Primer ingrediente.

![alt text](image-10.png)
![alt text](image-11.png)
> Segundo ingrediente.

Lo más seguro es que el último ingrediente esté en /root, y lo mejor sería hacerlo desde una terminal en condiciones.

![alt text](image-12.png)

En el servidor está instaldo php, por lo que podríamos hacer una reverse shell. En [payload all the things](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md) podemos encontrar el siguiente comando para crearnos una reverse shell:

![alt text](image-13.png)
> Tenemos que cambiar la IP(poner la nuestra del tunel) y el puerto solamente si queremos.

![alt text](image-14.png)
![alt text](image-15.png)

Ahora podremos trabajar mejor. Hagamos un escalado de privilegios, primero vemoas los permisos que tiene el usuario www-data:

![alt text](image-16.png)
> Tiene todos los permisos.

Inicimos sesión con root directamente y vemos su directorio:

![alt text](image-17.png)
> Último ingrediente.

# Usuario Si

# Root Si