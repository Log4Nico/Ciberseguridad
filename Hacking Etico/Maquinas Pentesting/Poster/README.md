# Poster

_The sys admin set up a rdbms in a safe way._

RDBMS = Sistema de Gestión de Bases de Datos Relacional.

## Análisis

Empezamos el análisis con un escaneo de puertos con nmap:

![alt text](img/image.png)

Encontramos los puertos 22 y 80 típicos y uno nuevo hasta ahora, el puerto 5432 qu corresponde al servicio postgresSQL.

Podríamos usar `Metasplot` para buscar algún exploit que nos permita acceder a información relevante:

![alt text](img/image-1.png)

Estemódulo nos permite enumerar las credenciales de los usuarios, vamos a ver que resultado nos da:

![alt text](img/image-2.png)

Nos da este resultado. Ahora que tenemos el usuario y la contraseña, vamos a buscar otro módulo que nos permita hacer algo más:

![alt text](img/image-3.png)

Como se ve en la siguiente foto, podemos ejecutar querys en la base de datos:

![alt text](img/image-4.png)

Busquemos algo para el hash de los usuarios:

![alt text](img/image-5.png)

![alt text](img/image-6.png)

Ahora uno que nos permita leer archivos del servidor:

![alt text](img/image-7.png)

![alt text](img/image-8.png)

Podemos leer los archivos del sistema, obviamente, los que no estén protegidos, además, el creador de la máquina nos ha puesto un archivo para que lo veamos también:

![alt text](img/image-9.png)

Tenemos un nuevo usuario y una contraseña.

Y por último, un exploit que permita ejecutar código arbitrario:

![alt text](img/image-10.png)

![alt text](img/image-11.png)

Hemos iniciado sesión en la máquina con el usuario postgress:

![alt text](img/image-12.png)

Ahora tenemos que escalar privilegios, antes encontramos unas credenciales:

![alt text](img/image-13.png)
> No es necesario hacerlo desde el Metasploit.

Y ahora si que si, escalamos privilegios.

![alt text](img/image-14.png)

Dark no puede ejecutar sudo con nada y no existe ningún binario vulnerable con SUID. Vemos que existe un usuario _alison_. Entiendo que la contraseña estará guardada en el sistema de alguna forma, voy a usar un `find` para encontrar algo relevante:

Lo único interesante fue esto:

![alt text](img/image-15.png)

Cuyo contenido es:

![alt text](img/image-16.png)

Iniciamos sesión con _alison_ ahora y vemos sus permisos:

![alt text](img/image-17.png)

Alison puede hacer `sudo` con todo, iniciamos sesión con root y ya habríamos termiando.