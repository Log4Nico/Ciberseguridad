# LazyAdmin

_Easy linux machine to practice your skills_

## Análisis

Como siempre, empezamos el análisis con un escaneo de puertos, y sacamos los siguientes puertos:

![alt text](img/image.png)

Dejemos el ssh apartado y centremonos en el `apache`:

![alt text](img/image-1.png)

Vale pues, hagamosle un gobuster:

![alt text](img/image-2.png)

![alt text](img/image-3.png)

Con este segundo `gobuster` encontramos un `login` y en el directorio _/inc_ encontramos un backup de _mysql_:

![alt text](img/image-4.png)

![alt text](img/image-5.png)

En este backup se encuentran varias cosas como posibles nombres de usuario y un claro hash:

![alt text](img/image-6.png)
> Si john falla siempre uso hashcat.

![alt text](img/image-7.png)
> El usuario es manager.

![alt text](img/image-8.png)

![alt text](img/image-9.png)

Como somos _admin_ podemos subir archivos a la página, obviamente, subimos una reverseshell:

![alt text](img/image-10.png)

Estamos ya dentro del sistema, ahora tenemos que escalar privilegios.

![alt text](img/image-11.png)

Este usuario puede ejecutar `perl` con permisos de administrador, y en la siguiente [entrada](https://gtfobins.github.io/gtfobins/perl/#sudo) de [gtfobins](https://gtfobins.github.io/) nos enseña esto:

![alt text](img/image-12.png)

Necesitamos tener una shell con TTY válido...

Probemons con el siguiente ejecutable:

![alt text](img/image-13.png)

![alt text](img/image-14.png)

Vale, parece que, aunque el archivo `copy.sh` sea del _root_ tenemos permisos para editarlo, o sea:

    www-data -> Puede ejecutar con sudo -> /home/itguy/backup.pl

    backup.pl -> Ejecuta como administrador -> /etc/copy.sh

    copy.sh -> Puede ser editado por -> Cualquiera.

Pues vamos a aprovechar eso para crear una revershell:

![alt text](img/image-15.png)

Pues ya habíamos acabado la máquina.